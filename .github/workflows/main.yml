# .github/workflows/main.yml

# Workflow name
name: "ðŸš€ Deployment (Main Branch)"

# Event for the workflow
on:
  push:
    branches:
      - develop

# List of jobs
jobs:
  deployment-on-main:
    # Operating System
    runs-on: ubuntu-latest
    # Job steps
    steps:
      - uses: oven-sh/setup-bun@v1
        with:
          bun-version: latest
      - name: Checkout code
        uses: actions/checkout@v2
        with:
          ref: develop
      - name: Install dependancies
        run: bun i
      - name: Create temporary branch
        run: git checkout -b temp-branch
      - name: Stage build folder changes
        run: git add build
      - name: Commit build folder changes
        run: git commit -m "Update build folder [skip ci]"
      - name: Push build folder changes to temporary branch
        run: git push origin temp-branch
      - name: Push build folder changes to main branch
        run: git push origin temp-branch:main
      - name: Clean up temporary branch
        run: git branch -d temp-branch
